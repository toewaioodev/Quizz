import{c as I,r as P,j as s,C as V,u as E,k as U,h as q,i as F,H as D,E as O,L as T}from"./app-BbfC0ngc.js";import{B as Q}from"./BottomNav-BghD8Y4-.js";import{N as Y}from"./Navbar-CpQksjDG.js";/* empty css            */import"./ChartBarIcon-9q-IPVAR.js";function W(t,e){const l=I.c(4),[o,g]=P.useState(t);let r,n;return l[0]!==e||l[1]!==t?(r=()=>{const _=setTimeout(()=>{g(t)},e);return()=>{clearTimeout(_)}},n=[t,e],l[0]=e,l[1]=t,l[2]=r,l[3]=n):(r=l[2],n=l[3]),P.useEffect(r,n),o}function ne(){const t=I.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=s.jsx(V,{channelName:"global-presence",children:s.jsx(G,{})}),t[0]=e):e=t[0],e}function G(){const t=I.c(45),{t:e}=E(),l=U().props.auth.user,[o,g]=P.useState(!1);let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],t[0]=r):r=t[0];const[n,_]=P.useState(r),{channel:i}=q("global-presence");let c,v;t[1]!==i?(c=()=>{if(!i)return;const a=async()=>{try{const m=await i.presence.get(),A=Array.from(new Map(m.filter(X).map(K)).values());_(A)}catch(m){console.error("Error fetching presence:",m)}};return i.presence.subscribe("enter",a),i.presence.subscribe("leave",a),i.presence.subscribe("update",a),a(),()=>{i.presence.unsubscribe()}},v=[i],t[1]=i,t[2]=c,t[3]=v):(c=t[2],v=t[3]),P.useEffect(c,v);let h;t[4]!==e?(h=a=>{F.post("/match/invite",{user_id:a}).then(()=>{alert(e("Invitation sent!"))}).catch(m=>{console.error(m),alert(e("Failed to send invitation."))})},t[4]=e,t[5]=h):h=t[5];const j=h;let d;t[6]!==i.presence||t[7]!==e||t[8]!==l.id||t[9]!==l.name||t[10]!==l.profile_photo_url||t[11]!==l.username?(d=()=>{g(!0),i.presence.update({name:l.name,id:l.id,profile_photo_url:l.profile_photo_url,username:l.username,status:"searching"}),F.post("/match/find").then(J).catch(a=>{console.error("Matchmaking failed:",a),a.response?.status===403&&alert(e(a.response.data.message)),g(!1),i.presence.update({name:l.name,id:l.id,profile_photo_url:l.profile_photo_url,username:l.username,status:"online"})})},t[6]=i.presence,t[7]=e,t[8]=l.id,t[9]=l.name,t[10]=l.profile_photo_url,t[11]=l.username,t[12]=d):d=t[12];const u=d;let M,C;t[13]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsx(D,{title:"Battle Lobby"}),C=s.jsx(Y,{}),t[13]=M,t[14]=C):(M=t[13],C=t[14]);let B;t[15]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[s.jsx("div",{className:"absolute -left-[20%] -top-[20%] h-[800px] w-[800px] animate-pulse rounded-full bg-indigo-600/20 blur-[120px]"}),s.jsx("div",{className:"absolute -bottom-[20%] -right-[20%] h-[800px] w-[800px] animate-pulse rounded-full bg-blue-600/20 blur-[120px] delay-1000"}),s.jsx("div",{className:"absolute inset-0 bg-[url('/images/grid.svg')] bg-center opacity-10 [mask-image:linear-gradient(180deg,white,rgba(255,255,255,0))]"})]}),t[15]=B):B=t[15];let x;t[16]!==e?(x=e("Quiz Battle"),t[16]=e,t[17]=x):x=t[17];let w;t[18]!==x?(w=s.jsx("h1",{className:"bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-5xl font-black tracking-tighter text-transparent",children:x}),t[18]=x,t[19]=w):w=t[19];let k;t[20]!==e?(k=e("Compete in real-time 1v1 matches."),t[20]=e,t[21]=k):k=t[21];let f;t[22]!==k?(f=s.jsx("p",{className:"text-lg text-slate-400 max-w-md",children:k}),t[22]=k,t[23]=f):f=t[23];let N;t[24]!==f||t[25]!==w?(N=s.jsxs("div",{className:"space-y-2",children:[w,f]}),t[24]=f,t[25]=w,t[26]=N):N=t[26];let p;t[27]!==u||t[28]!==o||t[29]!==l?(p=s.jsx(Z,{user:l,searching:o,findMatch:u}),t[27]=u,t[28]=o,t[29]=l,t[30]=p):p=t[30];let z;t[31]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(ee,{}),t[31]=z):z=t[31];let S;t[32]!==N||t[33]!==p?(S=s.jsxs("div",{className:"flex flex-col gap-8 md:col-span-7",children:[N,p,z]}),t[32]=N,t[33]=p,t[34]=S):S=t[34];let L;t[35]!==n||t[36]!==j||t[37]!==l?(L=s.jsx("div",{className:"h-full md:col-span-5",children:s.jsx(te,{activeUsers:n,user:l,handleInvite:j})}),t[35]=n,t[36]=j,t[37]=l,t[38]=L):L=t[38];let b;t[39]!==S||t[40]!==L?(b=s.jsxs("div",{className:"z-10 mt-8 grid w-full max-w-6xl grid-cols-1 items-start gap-8 p-4 md:grid-cols-12 md:p-8 pb-24",children:[S,L]}),t[39]=S,t[40]=L,t[41]=b):b=t[41];let y;t[42]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx(Q,{}),t[42]=y):y=t[42];let $;return t[43]!==b?($=s.jsxs("div",{className:"relative flex min-h-screen flex-col items-center overflow-hidden bg-slate-950 font-sans text-white selection:bg-indigo-500 selection:text-white",children:[M,C,B,b,y]}),t[43]=b,t[44]=$):$=t[44],$}function J(t){const{match_id:e}=t.data;O.visit(`/arena/${e}`)}function K(t){return[t.clientId,t.data]}function X(t){return t.data}const Z=P.memo(t=>{const e=I.c(49),{user:l,searching:o,findMatch:g}=t,{t:r}=E(),n=(l.points||0)>=10;let _;e[0]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx("div",{className:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-blue-500/10 blur-3xl"}),e[0]=_):_=e[0];let i;e[1]!==r?(i=r("My Rank"),e[1]=r,e[2]=i):i=e[2];let c;e[3]!==i?(c=s.jsx("p",{className:"text-xs font-bold tracking-widest text-slate-400 uppercase",children:i}),e[3]=i,e[4]=c):c=e[4];const v=l.points||0;let h;e[5]!==v?(h=s.jsx("span",{className:"text-4xl font-black text-white",children:v}),e[5]=v,e[6]=h):h=e[6];let j;e[7]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx("span",{className:"text-sm font-bold text-blue-400",children:"PTS"}),e[7]=j):j=e[7];let d;e[8]!==h?(d=s.jsxs("div",{className:"flex items-baseline gap-1",children:[h,j]}),e[8]=h,e[9]=d):d=e[9];let u;e[10]!==c||e[11]!==d?(u=s.jsxs("div",{children:[c,d]}),e[10]=c,e[11]=d,e[12]=u):u=e[12];let M;e[13]!==r?(M=r("Record"),e[13]=r,e[14]=M):M=e[14];let C;e[15]!==M?(C=s.jsx("p",{className:"text-xs font-bold tracking-widest text-slate-400 uppercase",children:M}),e[15]=M,e[16]=C):C=e[16];const B=l.wins||0;let x;e[17]!==B?(x=s.jsxs("span",{className:"rounded bg-green-500/20 px-2 py-0.5 text-sm font-bold text-green-400",children:[B,"W"]}),e[17]=B,e[18]=x):x=e[18];let w;e[19]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx("span",{className:"text-slate-600",children:"/"}),e[19]=w):w=e[19];const k=l.losses||0;let f;e[20]!==k?(f=s.jsxs("span",{className:"rounded bg-red-500/20 px-2 py-0.5 text-sm font-bold text-red-400",children:[k,"L"]}),e[20]=k,e[21]=f):f=e[21];let N;e[22]!==x||e[23]!==f?(N=s.jsxs("div",{className:"flex items-center gap-2",children:[x,w,f]}),e[22]=x,e[23]=f,e[24]=N):N=e[24];let p;e[25]!==C||e[26]!==N?(p=s.jsxs("div",{className:"text-right",children:[C,N]}),e[25]=C,e[26]=N,e[27]=p):p=e[27];let z;e[28]!==p||e[29]!==u?(z=s.jsxs("div",{className:"relative z-10 mb-8 flex items-center justify-between",children:[u,p]}),e[28]=p,e[29]=u,e[30]=z):z=e[30];const S=o||!n,L=`group relative w-full overflow-hidden rounded-2xl p-[1px] transition-all hover:scale-[1.01] active:scale-[0.99] ${n?"bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 shadow-lg shadow-indigo-500/20":"cursor-not-allowed opacity-50 grayscale"}`;let b;e[31]!==n||e[32]!==o||e[33]!==r?(b=s.jsx("div",{className:"relative flex h-16 w-full items-center justify-center gap-3 rounded-2xl bg-slate-900/90 backdrop-blur-sm transition-colors group-hover:bg-transparent",children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-white/30 border-t-white"}),s.jsx("span",{className:"font-bold tracking-wide text-white",children:r("Finding Match...")})]}):n?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-xl font-black tracking-wide text-white group-hover:text-white uppercase italic",children:r("Find Match")}),s.jsx("svg",{className:"h-6 w-6 text-indigo-400 group-hover:text-white transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("span",{className:"font-bold text-slate-400",children:r("Need 10 Points")})]})}),e[31]=n,e[32]=o,e[33]=r,e[34]=b):b=e[34];let y;e[35]!==g||e[36]!==S||e[37]!==L||e[38]!==b?(y=s.jsx("button",{onClick:g,disabled:S,className:L,children:b}),e[35]=g,e[36]=S,e[37]=L,e[38]=b,e[39]=y):y=e[39];let $;e[40]===Symbol.for("react.memo_cache_sentinel")?($=s.jsxs("span",{className:"relative flex h-2 w-2",children:[s.jsx("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-green-400 opacity-75"}),s.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-green-500"})]}),e[40]=$):$=e[40];let a;e[41]!==r?(a=r("Average wait time"),e[41]=r,e[42]=a):a=e[42];let m;e[43]!==a?(m=s.jsx("div",{className:"mt-3 text-center",children:s.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full border border-white/5 bg-white/5 px-3 py-1 text-[10px] font-medium text-slate-400",children:[$,a,": < 10s"]})}),e[43]=a,e[44]=m):m=e[44];let A;return e[45]!==z||e[46]!==y||e[47]!==m?(A=s.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-white/10 bg-white/5 p-8 shadow-2xl backdrop-blur-xl",children:[_,z,y,m]}),e[45]=z,e[46]=y,e[47]=m,e[48]=A):A=e[48],A}),ee=P.memo(()=>{const t=I.c(27),{t:e}=E();let l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx("div",{className:"mb-4 inline-flex h-12 w-12 items-center justify-center rounded-2xl bg-purple-500/20 text-purple-400 transition-colors group-hover:bg-purple-500 group-hover:text-white",children:s.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),t[0]=l):l=t[0];let o;t[1]!==e?(o=e("Practice Mode"),t[1]=e,t[2]=o):o=t[2];let g;t[3]!==o?(g=s.jsx("h3",{className:"font-bold text-white group-hover:text-purple-300 transition-colors",children:o}),t[3]=o,t[4]=g):g=t[4];let r;t[5]!==e?(r=e("Hone your skills solo"),t[5]=e,t[6]=r):r=t[6];let n;t[7]!==r?(n=s.jsx("p",{className:"mt-1 text-xs text-slate-400",children:r}),t[7]=r,t[8]=n):n=t[8];let _;t[9]!==g||t[10]!==n?(_=s.jsxs(T,{href:"/",className:"group relative overflow-hidden rounded-3xl border border-white/10 bg-white/5 p-6 transition-all hover:bg-white/10",children:[l,g,n]}),t[9]=g,t[10]=n,t[11]=_):_=t[11];let i;t[12]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx("div",{className:"mb-4 inline-flex h-12 w-12 items-center justify-center rounded-2xl bg-blue-500/20 text-blue-400 transition-colors group-hover:bg-blue-500 group-hover:text-white",children:s.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),t[12]=i):i=t[12];let c;t[13]!==e?(c=e("Leaderboard"),t[13]=e,t[14]=c):c=t[14];let v;t[15]!==c?(v=s.jsx("h3",{className:"font-bold text-white group-hover:text-blue-300 transition-colors",children:c}),t[15]=c,t[16]=v):v=t[16];let h;t[17]!==e?(h=e("See top players"),t[17]=e,t[18]=h):h=t[18];let j;t[19]!==h?(j=s.jsx("p",{className:"mt-1 text-xs text-slate-400",children:h}),t[19]=h,t[20]=j):j=t[20];let d;t[21]!==j||t[22]!==v?(d=s.jsxs(T,{href:"/leaderboard",className:"group relative overflow-hidden rounded-3xl border border-white/10 bg-white/5 p-6 transition-all hover:bg-white/10",children:[i,v,j]}),t[21]=j,t[22]=v,t[23]=d):d=t[23];let u;return t[24]!==d||t[25]!==_?(u=s.jsxs("div",{className:"grid grid-cols-2 gap-4 md:gap-6",children:[_,d]}),t[24]=d,t[25]=_,t[26]=u):u=t[26],u}),te=P.memo(t=>{const e=I.c(41),{activeUsers:l,user:o,handleInvite:g}=t,{t:r}=E(),[n,_]=P.useState(""),i=W(n,1e3),[c,v]=P.useState(null),[h,j]=P.useState(!1);let d,u;e[0]!==i?(d=()=>{if(!i){v(null);return}j(!0),F.get("/users/search",{params:{query:i}}).then(a=>{v(a.data)}).catch(a=>{console.error("Search failed",a),v([])}).finally(()=>j(!1))},u=[i],e[0]=i,e[1]=d,e[2]=u):(d=e[1],u=e[2]),P.useEffect(d,u);let M;e:{if(!i){M=l;break e}if(!c){let m;e[3]===Symbol.for("react.memo_cache_sentinel")?(m=[],e[3]=m):m=e[3],M=m;break e}let a;if(e[4]!==l||e[5]!==c){let m;e[7]!==l?(m=A=>{const H=l.find(R=>R.id===A.id);return H?{...A,...H}:{...A,status:"offline"}},e[7]=l,e[8]=m):m=e[8],a=c.map(m),e[4]=l,e[5]=c,e[6]=a}else a=e[6];M=a}const C=W(M,50);let B;e[9]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsxs("span",{className:"relative flex h-3 w-3",children:[s.jsx("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-green-400 opacity-75"}),s.jsx("span",{className:"relative inline-flex h-3 w-3 rounded-full bg-green-500"})]}),e[9]=B):B=e[9];let x;e[10]!==r?(x=r("Active Players"),e[10]=r,e[11]=x):x=e[11];let w;e[12]!==l.length?(w=s.jsx("span",{className:"ml-auto rounded-full bg-white/10 px-2 py-0.5 text-xs text-slate-300",children:l.length}),e[12]=l.length,e[13]=w):w=e[13];let k;e[14]!==x||e[15]!==w?(k=s.jsxs("h2",{className:"flex items-center gap-3 text-lg font-bold text-white",children:[B,x,w]}),e[14]=x,e[15]=w,e[16]=k):k=e[16];let f;e[17]!==r?(f=r("Search players..."),e[17]=r,e[18]=f):f=e[18];let N;e[19]===Symbol.for("react.memo_cache_sentinel")?(N=a=>_(a.target.value),e[19]=N):N=e[19];let p;e[20]!==n||e[21]!==f?(p=s.jsx("input",{type:"text",placeholder:f,value:n,onChange:N,className:"w-full rounded-xl border border-white/10 bg-white/5 px-4 py-2 pl-10 text-sm text-white placeholder-slate-500 focus:border-blue-500 focus:ring-0"}),e[20]=n,e[21]=f,e[22]=p):p=e[22];let z;e[23]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx("svg",{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e[23]=z):z=e[23];let S;e[24]!==p?(S=s.jsxs("div",{className:"mt-4 relative",children:[p,z]}),e[24]=p,e[25]=S):S=e[25];let L;e[26]!==S||e[27]!==k?(L=s.jsxs("div",{className:"border-b border-white/5 p-6",children:[k,S]}),e[26]=S,e[27]=k,e[28]=L):L=e[28];let b;e[29]!==C||e[30]!==g||e[31]!==h||e[32]!==n||e[33]!==r||e[34]!==o?(b=h?s.jsx("div",{className:"flex justify-center p-4",children:s.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-white/30 border-t-blue-500"})}):C.length===0?s.jsx("div",{className:"flex h-full flex-col items-center justify-center text-slate-500",children:n?s.jsx("p",{children:r("No players found.")}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mb-4 rounded-full bg-white/5 p-4",children:s.jsx("svg",{className:"h-8 w-8 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),s.jsx("p",{children:r("No active players yet.")})]})}):C.map(a=>s.jsxs("div",{className:`group flex items-center gap-4 rounded-2xl border border-transparent p-3 transition-all hover:bg-white/5 ${a.id===o.id?"bg-white/5 border-white/5":""}`,children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:a.profile_photo_url||`https://ui-avatars.com/api/?name=${a.name}`,alt:a.name,className:"h-10 w-10 rounded-full object-cover ring-2 ring-white/10 transition-all group-hover:ring-white/30"}),s.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 h-3 w-3 rounded-full border-2 border-slate-900 ${a.status==="playing"?"bg-orange-500":a.status==="searching"?"bg-blue-500":a.status==="online"?"bg-green-500":"bg-slate-500"}`})]}),s.jsxs("div",{className:"flex-1 overflow-hidden",children:[s.jsxs("p",{className:"truncate text-sm font-bold text-slate-200",children:[a.name,a.username&&s.jsxs("span",{className:"ml-1 text-xs font-normal text-slate-400",children:["@",a.username]}),a.id==o.id&&s.jsxs("span",{className:"ml-2 text-xs font-normal text-slate-500",children:["(",r("You"),")"]})]}),s.jsx("p",{className:"text-xs text-slate-500",children:a.status==="playing"?r("In Match"):a.status==="searching"?r("Searching..."):a.status==="online"?r("Online"):r("Offline")})]}),a.id!=o.id&&a.status!=="playing"&&s.jsx("button",{onClick:()=>g(a.id),className:"rounded-xl bg-white/5 px-3 py-1.5 text-xs font-bold text-white transition-colors hover:bg-blue-600",children:r("Invite")})]},a.id)),e[29]=C,e[30]=g,e[31]=h,e[32]=n,e[33]=r,e[34]=o,e[35]=b):b=e[35];let y;e[36]!==b?(y=s.jsx("div",{className:"custom-scrollbar flex-1 overflow-y-auto p-4 space-y-2",children:b}),e[36]=b,e[37]=y):y=e[37];let $;return e[38]!==L||e[39]!==y?($=s.jsxs("div",{className:"flex h-full min-h-[500px] flex-col overflow-hidden rounded-3xl border border-white/10 bg-slate-900/50 backdrop-blur-md",children:[L,y]}),e[38]=L,e[39]=y,e[40]=$):$=e[40],$});export{ne as default};
