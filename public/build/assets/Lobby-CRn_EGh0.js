import{c as z,j as s,C as E,u as A,k as I,r as $,h as H,i as B,H as V,E as W,L as R}from"./app-waLCsgoW.js";import{N as U}from"./Navbar-CPsjb5VV.js";/* empty css            */import"./ThemeSwitcher-1KQ5Op4M.js";function ee(){const t=z.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=s.jsx(E,{channelName:"global-presence",children:s.jsx(T,{})}),t[0]=e):e=t[0],e}function T(){const t=z.c(41),{t:e}=A(),r=I().props.auth.user,[i,c]=$.useState(!1);let l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],t[0]=l):l=t[0];const[n,o]=$.useState(l),{channel:a}=H("global-presence");let x,h;t[1]!==a?(x=()=>{if(!a)return;const M=async()=>{try{const P=await a.presence.get(),F=Array.from(new Map(P.filter(Q).map(O)).values());o(F)}catch(P){console.error("Error fetching presence:",P)}};return a.presence.subscribe("enter",M),a.presence.subscribe("leave",M),a.presence.subscribe("update",M),M(),()=>{a.presence.unsubscribe()}},h=[a],t[1]=a,t[2]=x,t[3]=h):(x=t[2],h=t[3]),$.useEffect(x,h);let m;t[4]!==e?(m=M=>{B.post("/match/invite",{user_id:M}).then(()=>{alert(e("Invitation sent!"))}).catch(P=>{console.error(P),alert(e("Failed to send invitation."))})},t[4]=e,t[5]=m):m=t[5];const f=m;let u;t[6]!==a.presence||t[7]!==e||t[8]!==r.id||t[9]!==r.name||t[10]!==r.profile_photo_url?(u=()=>{c(!0),a.presence.update({name:r.name,id:r.id,profile_photo_url:r.profile_photo_url,status:"searching"}),B.post("/match/find").then(q).catch(M=>{console.error("Matchmaking failed:",M),M.response?.status===403&&alert(e(M.response.data.message)),c(!1),a.presence.update({name:r.name,id:r.id,profile_photo_url:r.profile_photo_url,status:"online"})})},t[6]=a.presence,t[7]=e,t[8]=r.id,t[9]=r.name,t[10]=r.profile_photo_url,t[11]=u):u=t[11];const d=u;let C,j;t[12]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx(V,{title:"Battle Lobby"}),j=s.jsx(U,{}),t[12]=C,t[13]=j):(C=t[12],j=t[13]);let w;t[14]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsxs("div",{className:"pointer-events-none absolute top-0 left-0 h-full w-full overflow-hidden opacity-50 dark:opacity-100",children:[s.jsx("div",{className:"absolute top-[-10%] right-[-10%] h-[500px] w-[500px] rounded-full bg-purple-600/20 blur-[100px]"}),s.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] h-[500px] w-[500px] rounded-full bg-blue-600/20 blur-[100px]"})]}),t[14]=w):w=t[14];let p;t[15]!==e?(p=e("Quiz Battle"),t[15]=e,t[16]=p):p=t[16];let y;t[17]!==p?(y=s.jsx("h1",{className:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-4xl font-bold tracking-tighter text-transparent dark:from-blue-400 dark:to-purple-400",children:p}),t[17]=p,t[18]=y):y=t[18];let _;t[19]!==e?(_=e("Compete in real-time 1v1 matches."),t[19]=e,t[20]=_):_=t[20];let L;t[21]!==_?(L=s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:_}),t[21]=_,t[22]=L):L=t[22];let b;t[23]!==L||t[24]!==y?(b=s.jsxs("div",{className:"space-y-2",children:[y,L]}),t[23]=L,t[24]=y,t[25]=b):b=t[25];let g;t[26]!==d||t[27]!==i||t[28]!==r?(g=s.jsx(Y,{user:r,searching:i,findMatch:d}),t[26]=d,t[27]=i,t[28]=r,t[29]=g):g=t[29];let N;t[30]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx(D,{}),t[30]=N):N=t[30];let v;t[31]!==b||t[32]!==g?(v=s.jsxs("div",{className:"space-y-8 text-center md:text-left",children:[b,g,N]}),t[31]=b,t[32]=g,t[33]=v):v=t[33];let k;t[34]!==n||t[35]!==f||t[36]!==r?(k=s.jsx(G,{activeUsers:n,user:r,handleInvite:f}),t[34]=n,t[35]=f,t[36]=r,t[37]=k):k=t[37];let S;return t[38]!==v||t[39]!==k?(S=s.jsxs("div",{className:"relative flex min-h-screen flex-col items-center overflow-hidden bg-slate-50 p-0 text-slate-900 transition-colors duration-300 dark:bg-slate-950 dark:text-white",children:[C,j,w,s.jsxs("div",{className:"z-10 mt-8 grid w-full max-w-4xl grid-cols-1 items-start gap-8 p-6 md:grid-cols-2",children:[v,k]})]}),t[38]=v,t[39]=k,t[40]=S):S=t[40],S}function q(t){const{match_id:e}=t.data;W.visit(`/arena/${e}`)}function O(t){return[t.clientId,t.data]}function Q(t){return t.data}const Y=$.memo(t=>{const e=z.c(45),{user:r,searching:i,findMatch:c}=t,{t:l}=A();let n;e[0]!==l?(n=l("My Rank"),e[0]=l,e[1]=n):n=e[1];let o;e[2]!==n?(o=s.jsx("p",{className:"text-xs font-semibold tracking-wider text-slate-500 uppercase",children:n}),e[2]=n,e[3]=o):o=e[3];const a=r.points||0;let x;e[4]!==l?(x=l("PTS"),e[4]=l,e[5]=x):x=e[5];let h;e[6]!==a||e[7]!==x?(h=s.jsxs("p",{className:"text-2xl font-bold",children:[a," ",x]}),e[6]=a,e[7]=x,e[8]=h):h=e[8];let m;e[9]!==o||e[10]!==h?(m=s.jsxs("div",{className:"text-left",children:[o,h]}),e[9]=o,e[10]=h,e[11]=m):m=e[11];let f;e[12]!==l?(f=l("Record"),e[12]=l,e[13]=f):f=e[13];let u;e[14]!==f?(u=s.jsx("p",{className:"text-xs font-semibold tracking-wider text-slate-500 uppercase",children:f}),e[14]=f,e[15]=u):u=e[15];const d=r.wins||0,C=r.losses||0;let j;e[16]!==C||e[17]!==d?(j=s.jsxs("p",{className:"text-lg font-medium text-green-600 dark:text-green-400",children:[d,"W - ",C,"L"]}),e[16]=C,e[17]=d,e[18]=j):j=e[18];let w;e[19]!==j||e[20]!==u?(w=s.jsxs("div",{className:"text-right",children:[u,j]}),e[19]=j,e[20]=u,e[21]=w):w=e[21];let p;e[22]!==w||e[23]!==m?(p=s.jsxs("div",{className:"mb-6 flex items-center justify-between border-b border-slate-200 pb-6 dark:border-white/5",children:[m,w]}),e[22]=w,e[23]=m,e[24]=p):p=e[24];const y=i||(r.points||0)<10,_=`group relative w-full overflow-hidden rounded-xl p-[1px] transition-all ${(r.points||0)<10?"cursor-not-allowed bg-slate-300 opacity-50 dark:bg-slate-700":"bg-gradient-to-r from-blue-600 to-violet-600 hover:scale-[1.02] active:scale-[0.98]"}`,L=`relative flex h-14 items-center justify-center gap-3 rounded-[11px] transition-colors ${(r.points||0)<10?"bg-slate-100 dark:bg-slate-900":"bg-slate-50 group-hover:bg-transparent dark:bg-slate-950/50"}`;let b;e[25]!==i||e[26]!==l||e[27]!==r.points?(b=i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-slate-400 border-t-slate-800 dark:border-white/30 dark:border-t-white"}),s.jsx("span",{className:"font-semibold tracking-wide text-slate-800 dark:text-white",children:l("Finding Match...")})]}):(r.points||0)<10?s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"h-6 w-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),s.jsx("span",{className:"text-lg font-semibold tracking-wide text-slate-500 dark:text-slate-400",children:l("Need 10 Points")})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"h-6 w-6 text-slate-800 dark:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),s.jsx("span",{className:"text-lg font-semibold tracking-wide text-slate-800 dark:text-white",children:l("Find Match")})]}),e[25]=i,e[26]=l,e[27]=r.points,e[28]=b):b=e[28];let g;e[29]!==L||e[30]!==b?(g=s.jsx("div",{className:L,children:b}),e[29]=L,e[30]=b,e[31]=g):g=e[31];let N;e[32]!==c||e[33]!==y||e[34]!==_||e[35]!==g?(N=s.jsx("button",{onClick:c,disabled:y,className:_,children:g}),e[32]=c,e[33]=y,e[34]=_,e[35]=g,e[36]=N):N=e[36];let v;e[37]!==l?(v=l("Average wait time"),e[37]=l,e[38]=v):v=e[38];let k;e[39]!==v?(k=s.jsxs("div",{className:"mt-4 text-center text-xs text-slate-500",children:[v,": < 10s"]}),e[39]=v,e[40]=k):k=e[40];let S;return e[41]!==p||e[42]!==N||e[43]!==k?(S=s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white/50 p-6 shadow-xl backdrop-blur-xl dark:border-white/10 dark:bg-slate-900/50",children:[p,N,k]}),e[41]=p,e[42]=N,e[43]=k,e[44]=S):S=e[44],S}),D=$.memo(()=>{const t=z.c(13),{t:e}=A();let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsx("div",{className:"mb-2 origin-left text-purple-600 transition-transform group-hover:scale-110 dark:text-purple-400",children:s.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),t[0]=r):r=t[0];let i;t[1]!==e?(i=e("Practice Mode"),t[1]=e,t[2]=i):i=t[2];let c;t[3]!==i?(c=s.jsxs("button",{className:"group rounded-xl border border-slate-200 bg-white/50 p-4 text-left transition-colors hover:border-purple-400/50 dark:border-white/5 dark:bg-slate-900/50 dark:hover:border-white/20",children:[r,s.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-white",children:i})]}),t[3]=i,t[4]=c):c=t[4];let l;t[5]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx("div",{className:"mb-2 origin-left text-blue-600 transition-transform group-hover:scale-110 dark:text-blue-400",children:s.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),t[5]=l):l=t[5];let n;t[6]!==e?(n=e("Leaderboard"),t[6]=e,t[7]=n):n=t[7];let o;t[8]!==n?(o=s.jsxs(R,{href:"/leaderboard",className:"group rounded-xl border border-slate-200 bg-white/50 p-4 text-left transition-colors hover:border-blue-400/50 dark:border-white/5 dark:bg-slate-900/50 dark:hover:border-white/20",children:[l,s.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-white",children:n})]}),t[8]=n,t[9]=o):o=t[9];let a;return t[10]!==c||t[11]!==o?(a=s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c,o]}),t[10]=c,t[11]=o,t[12]=a):a=t[12],a}),G=$.memo(t=>{const e=z.c(24),{activeUsers:r,user:i,handleInvite:c}=t,{t:l}=A();let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx("span",{className:"mr-2 h-2 w-2 animate-pulse rounded-full bg-green-500"}),e[0]=n):n=e[0];let o;e[1]!==l?(o=l("Active Players"),e[1]=l,e[2]=o):o=e[2];let a;e[3]!==r.length||e[4]!==o?(a=s.jsxs("h2",{className:"mb-4 flex items-center text-xl font-bold text-slate-800 dark:text-white",children:[n,o," (",r.length,")"]}),e[3]=r.length,e[4]=o,e[5]=a):a=e[5];let x;if(e[6]!==r||e[7]!==c||e[8]!==l||e[9]!==i){let u;e[11]!==c||e[12]!==l||e[13]!==i?(u=d=>s.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-white/40 p-3 transition-colors hover:bg-white/60 dark:border-white/5 dark:bg-white/5 dark:hover:bg-white/10",children:[s.jsx("img",{src:d.profile_photo_url||`https://ui-avatars.com/api/?name=${d.name}`,alt:d.name,className:"h-10 w-10 rounded-full object-cover ring-2 ring-white/20"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:[d.name," ",d.id==i.id&&s.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["(",l("You"),")"]})]}),s.jsx("p",{className:"text-xs text-slate-500",children:d.status==="playing"?l("In Match"):d.status==="searching"?l("Searching..."):l("Online")})]}),d.status==="searching"&&s.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",children:[s.jsx("div",{className:"h-1.5 w-1.5 animate-pulse rounded-full bg-blue-500"}),l("Finding")]}),d.status==="playing"&&s.jsx("div",{className:"flex items-center gap-1 rounded-full bg-orange-100 px-2 py-0.5 text-xs font-medium text-orange-600 dark:bg-orange-900/30 dark:text-orange-400",children:l("Playing")}),d.id!=i.id&&d.status!=="playing"&&s.jsx("button",{onClick:()=>c(d.id),className:"ml-2 rounded-lg bg-indigo-100 px-3 py-1 text-xs font-medium text-indigo-700 transition-colors hover:bg-indigo-200 dark:bg-indigo-500/20 dark:text-indigo-300 dark:hover:bg-indigo-500/30",children:l("Invite")})]},d.id),e[11]=c,e[12]=l,e[13]=i,e[14]=u):u=e[14],x=r.map(u),e[6]=r,e[7]=c,e[8]=l,e[9]=i,e[10]=x}else x=e[10];let h;e[15]!==r.length||e[16]!==l?(h=r.length===0&&s.jsx("div",{className:"py-10 text-center text-slate-500",children:l("Connecting...")}),e[15]=r.length,e[16]=l,e[17]=h):h=e[17];let m;e[18]!==x||e[19]!==h?(m=s.jsxs("div",{className:"custom-scrollbar max-h-[500px] space-y-2 overflow-y-auto pr-2",children:[x,h]}),e[18]=x,e[19]=h,e[20]=m):m=e[20];let f;return e[21]!==a||e[22]!==m?(f=s.jsxs("div",{className:"h-full min-h-[400px] rounded-2xl border border-slate-200 bg-white/30 p-6 backdrop-blur-md dark:border-white/5 dark:bg-slate-900/30",children:[a,m]}),e[21]=a,e[22]=m,e[23]=f):f=e[23],f});export{ee as default};
