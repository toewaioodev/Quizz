import{u as q,k as z,r as o,i as k,j as e,H as L,L as A}from"./app-CtT6M5I2.js";import{m as x}from"./proxy-DbRpmezB.js";import{A as j}from"./index-CTfkKxC9.js";/* empty css            */function T({categoryId:m,categoryName:h}){const{t:s,i18n:d}=q(),{auth:g}=z().props,[a,v]=o.useState(null),[y,p]=o.useState(!0),[c,b]=o.useState({correct:0,total:0,streak:0}),[t,f]=o.useState(null),[w,N]=o.useState(g.user.points);o.useEffect(()=>{u()},[m]);const u=async()=>{p(!0),f(null);try{const n=await k.post("/quiz/generate",{topic:m,difficulty:g.user.settings?.difficulty||"medium",language:d.language==="en-US"?"en":d.language||"en"});v(n.data)}catch(n){console.error(n)}finally{p(!1)}},_=async n=>{if(!(t||!a))try{const l=(await k.post("/quiz/answer",{question_id:a.id,selected_option:n})).data;f(l),N(l.new_total_points),l.correct?(new Audio("/sounds/correct.mp3").play().catch(()=>{}),b(r=>({correct:r.correct+1,total:r.total+1,streak:r.streak+1}))):(new Audio("/sounds/wrong.mp3").play().catch(()=>{}),b(r=>({...r,total:r.total+1,streak:0})))}catch(i){console.error(i)}},C=d.language==="my"&&a?.question_text_my?a.question_text_my:a?.question_text,S=d.language==="my"&&a?.options_my?a.options_my:a?.options;return e.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans text-slate-900 transition-colors duration-300 dark:bg-slate-950 dark:text-gray-100",children:[e.jsx(L,{title:`${h} Quiz`}),e.jsx("header",{className:"fixed top-0 right-0 left-0 z-50 border-b border-slate-200 bg-white/80 px-4 py-3 backdrop-blur-md dark:border-slate-800 dark:bg-slate-900/80",children:e.jsxs("div",{className:"mx-auto flex max-w-4xl items-center justify-between",children:[e.jsxs(A,{href:"/",className:"flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-bold text-slate-500 transition-colors hover:bg-slate-100 hover:text-slate-800 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200",children:[e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),s("Exit")]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"hidden sm:block",children:[e.jsx("span",{className:"text-xs font-bold tracking-wider text-slate-400 uppercase",children:s("Category")}),e.jsx("div",{className:"font-bold",children:s(h)})]}),e.jsx("div",{className:"hidden h-8 w-px bg-slate-200 sm:block dark:bg-slate-700"}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-xs font-bold tracking-wider text-slate-400 uppercase",children:s("SCORE")}),e.jsx("div",{className:"text-xl font-black text-blue-600 dark:text-blue-400",children:w})]})]})]})}),e.jsx("div",{className:"fixed top-[61px] right-0 left-0 z-40 h-1 bg-slate-200 dark:bg-slate-800",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${Math.min(c.correct/(c.total||1)*100,100)}%`},className:"h-full bg-green-500"})}),e.jsx("main",{className:"flex min-h-screen flex-col items-center justify-center p-4 pt-24 pb-12",children:e.jsx("div",{className:"w-full max-w-2xl",children:e.jsx(j,{mode:"wait",children:y?e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center justify-center py-20",children:[e.jsx("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-slate-200 border-t-blue-500"}),e.jsx("p",{className:"mt-4 font-medium text-slate-500",children:s("Loading questions...")})]},"loader"):a?e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-8",children:[c.streak>1&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-orange-100 px-4 py-1 text-sm font-bold text-orange-600 dark:bg-orange-900/30 dark:text-orange-400",children:[e.jsx("span",{children:"ðŸ”¥"}),e.jsxs("span",{children:[c.streak," ",s("Streak!")]})]})}),e.jsx("div",{className:"relative overflow-hidden rounded-3xl bg-white p-8 shadow-2xl dark:bg-slate-800/50 dark:ring-1 dark:ring-white/10",children:e.jsx("h2",{className:"text-center text-2xl leading-tight font-black text-slate-800 md:text-3xl dark:text-white",children:C})}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:S?.map((n,i)=>{const l=a.options[i];let r="group relative overflow-hidden rounded-2xl border-2 p-5 text-left transition-all duration-200 hover:-translate-y-1 hover:shadow-lg focus:outline-none focus:ring-4 focus:ring-blue-500/50 ";return t?l===t.correct_answer?r+="border-green-500 bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-300 z-10 scale-[1.02] shadow-green-500/20":l===t.selected_option&&!t.correct?r+="border-red-500 bg-red-50 text-red-700 dark:bg-red-900/20 dark:text-red-300 opacity-80":r+="border-slate-200 bg-slate-50 opacity-40 dark:border-slate-700 dark:bg-slate-800/50":r+="border-slate-200 bg-white hover:border-blue-500 hover:bg-blue-50 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200 dark:hover:border-blue-500 dark:hover:bg-blue-900/20",e.jsx("button",{onClick:()=>!t&&_(l),disabled:!!t,className:r,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex h-8 w-8 shrink-0 items-center justify-center rounded-lg border text-sm font-bold transition-colors ${t&&(l===t.correct_answer||l===t.selected_option&&!t.correct)?"border-transparent bg-white/20":"border-slate-200 bg-slate-100 text-slate-500 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-400"}`,children:String.fromCharCode(65+i)}),e.jsx("span",{className:"font-bold",children:n})]})},i)})}),e.jsx(j,{children:t&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"fixed right-0 bottom-0 left-0 z-50 border-t border-slate-200 bg-white p-4 shadow-[0_-10px_40px_rgba(0,0,0,0.1)] dark:border-slate-800 dark:bg-slate-900",children:e.jsxs("div",{className:"mx-auto flex max-w-4xl items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-full text-2xl ${t.correct?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:t.correct?"âœ“":"âœ—"}),e.jsxs("div",{children:[e.jsx("div",{className:`font-black uppercase ${t.correct?"text-green-600":"text-red-500"}`,children:t.correct?s("Correct!"):s("Wrong Answer")}),e.jsx("div",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:t.correct?`+${t.points_earned} PTS`:s("Don't give up!")})]})]}),e.jsxs("button",{onClick:()=>u(),className:"flex items-center gap-2 rounded-xl bg-slate-900 px-6 py-3 font-bold text-white shadow-lg transition-transform hover:scale-105 active:scale-95 dark:bg-white dark:text-slate-900",children:[s("Next Question"),e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})]})})})]},a.id):e.jsxs("div",{className:"text-center text-red-500",children:[e.jsx("p",{children:s("Failed to load question.")}),e.jsx("button",{onClick:()=>u(),className:"mt-4 underline",children:s("Try Again")})]})})})})]})}export{T as default};
