import{u as ce,j as t,r as oe,a as me,H as he,L as fe,c as be}from"./app-B6ymVI_o.js";import{c as xe}from"./compiler-runtime-DsFBfS2b.js";import{f as pe,C as ue,A as ge,g as ve}from"./ChannelProvider-DSE01W-M.js";import{N as je}from"./Navbar-DzcdfMEv.js";import{u as ke}from"./ThemeSwitcher-DF4ydx8B.js";/* empty css            */function Pe(e){const s=xe.c(6),{ably_key:l}=e,d=ce().props.auth.user,c=String(d.id);let n;s[0]!==l||s[1]!==c?(n=new pe.Realtime({key:l,clientId:c}),s[0]=l,s[1]=c,s[2]=n):n=s[2];const a=n;let x;s[3]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsx(ue,{channelName:"lobby",children:t.jsx(we,{})}),s[3]=x):x=s[3];let r;return s[4]!==a?(r=t.jsx(ge,{client:a,children:x}),s[4]=a,s[5]=r):r=s[5],r}function we(){const e=xe.c(109),{t:s}=ke(),l=ce().props.auth.user,[d,c]=oe.useState(!1);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=[],e[0]=n):n=e[0];const[a,x]=oe.useState(n),{channel:r}=ve("lobby");let O,Q;e[1]!==r||e[2]!==l.id||e[3]!==l.name?(O=()=>{if(!r)return;const i=async()=>{try{const o=await r.presence.get(),de=Array.from(new Map(o.map(ye)).values());x(de)}catch(o){console.error("Error fetching presence:",o)}};return r.presence.enter({name:l.name,id:l.id}),r.presence.subscribe("enter",i),r.presence.subscribe("leave",i),r.presence.subscribe("update",i),i(),()=>{r.presence.leave(),r.presence.unsubscribe()}},Q=[r,l.name,l.id],e[1]=r,e[2]=l.id,e[3]=l.name,e[4]=O,e[5]=Q):(O=e[4],Q=e[5]),oe.useEffect(O,Q);let Y;e[6]!==s?(Y=()=>{c(!0),me.post("/match/find").then(Ne).catch(i=>{console.error("Matchmaking failed:",i),i.response?.status===403&&alert(s(i.response.data.message)),c(!1)})},e[6]=s,e[7]=Y):Y=e[7];const te=Y;let D,G;e[8]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx(he,{title:"Battle Lobby"}),G=t.jsx(je,{}),e[8]=D,e[9]=G):(D=e[8],G=e[9]);let J;e[10]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsxs("div",{className:"pointer-events-none absolute top-0 left-0 h-full w-full overflow-hidden opacity-50 dark:opacity-100",children:[t.jsx("div",{className:"absolute top-[-10%] right-[-10%] h-[500px] w-[500px] rounded-full bg-purple-600/20 blur-[100px]"}),t.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] h-[500px] w-[500px] rounded-full bg-blue-600/20 blur-[100px]"})]}),e[10]=J):J=e[10];let m;e[11]!==s?(m=s("Quiz Battle"),e[11]=s,e[12]=m):m=e[12];let h;e[13]!==m?(h=t.jsx("h1",{className:"bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-4xl font-bold tracking-tighter text-transparent",children:m}),e[13]=m,e[14]=h):h=e[14];let f;e[15]!==s?(f=s("Compete in real-time 1v1 matches."),e[15]=s,e[16]=f):f=e[16];let b;e[17]!==f?(b=t.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:f}),e[17]=f,e[18]=b):b=e[18];let p;e[19]!==b||e[20]!==h?(p=t.jsxs("div",{className:"space-y-2",children:[h,b]}),e[19]=b,e[20]=h,e[21]=p):p=e[21];let u;e[22]!==s?(u=s("My Rank"),e[22]=s,e[23]=u):u=e[23];let g;e[24]!==u?(g=t.jsx("p",{className:"text-xs font-semibold tracking-wider text-slate-500 uppercase",children:u}),e[24]=u,e[25]=g):g=e[25];const se=l.points||0;let v;e[26]!==s?(v=s("PTS"),e[26]=s,e[27]=v):v=e[27];let j;e[28]!==se||e[29]!==v?(j=t.jsxs("p",{className:"text-2xl font-bold",children:[se," ",v]}),e[28]=se,e[29]=v,e[30]=j):j=e[30];let k;e[31]!==g||e[32]!==j?(k=t.jsxs("div",{className:"text-left",children:[g,j]}),e[31]=g,e[32]=j,e[33]=k):k=e[33];let w;e[34]!==s?(w=s("Record"),e[34]=s,e[35]=w):w=e[35];let N;e[36]!==w?(N=t.jsx("p",{className:"text-xs font-semibold tracking-wider text-slate-500 uppercase",children:w}),e[36]=w,e[37]=N):N=e[37];const le=l.wins||0,re=l.losses||0;let y;e[38]!==le||e[39]!==re?(y=t.jsxs("p",{className:"text-lg font-medium text-green-600 dark:text-green-400",children:[le,"W - ",re,"L"]}),e[38]=le,e[39]=re,e[40]=y):y=e[40];let L;e[41]!==N||e[42]!==y?(L=t.jsxs("div",{className:"text-right",children:[N,y]}),e[41]=N,e[42]=y,e[43]=L):L=e[43];let _;e[44]!==k||e[45]!==L?(_=t.jsxs("div",{className:"mb-6 flex items-center justify-between border-b border-slate-200 dark:border-white/5 pb-6",children:[k,L]}),e[44]=k,e[45]=L,e[46]=_):_=e[46];const ae=d||(l.points||0)<10,ie=`group relative w-full overflow-hidden rounded-xl p-[1px] transition-all ${(l.points||0)<10?"cursor-not-allowed bg-slate-300 dark:bg-slate-700 opacity-50":"bg-gradient-to-r from-blue-600 to-violet-600 hover:scale-[1.02] active:scale-[0.98]"}`,ne=`relative flex h-14 items-center justify-center gap-3 rounded-[11px] transition-colors ${(l.points||0)<10?"bg-slate-100 dark:bg-slate-900":"bg-slate-50 dark:bg-slate-950/50 group-hover:bg-transparent"}`;let M;e[47]!==d||e[48]!==s||e[49]!==l.points?(M=d?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-slate-400 dark:border-white/30 border-t-slate-800 dark:border-t-white"}),t.jsx("span",{className:"font-semibold tracking-wide text-slate-800 dark:text-white",children:s("Finding Match...")})]}):(l.points||0)<10?t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"h-6 w-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),t.jsx("span",{className:"text-lg font-semibold tracking-wide text-slate-500 dark:text-slate-400",children:s("Need 10 Points")})]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"h-6 w-6 text-slate-800 dark:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),t.jsx("span",{className:"text-lg font-semibold tracking-wide text-slate-800 dark:text-white",children:s("Find Match")})]}),e[47]=d,e[48]=s,e[49]=l.points,e[50]=M):M=e[50];let S;e[51]!==ne||e[52]!==M?(S=t.jsx("div",{className:ne,children:M}),e[51]=ne,e[52]=M,e[53]=S):S=e[53];let C;e[54]!==te||e[55]!==ae||e[56]!==ie||e[57]!==S?(C=t.jsx("button",{onClick:te,disabled:ae,className:ie,children:S}),e[54]=te,e[55]=ae,e[56]=ie,e[57]=S,e[58]=C):C=e[58];let A;e[59]!==s?(A=s("Average wait time"),e[59]=s,e[60]=A):A=e[60];let P;e[61]!==A?(P=t.jsxs("div",{className:"mt-4 text-center text-xs text-slate-500",children:[A,": < 10s"]}),e[61]=A,e[62]=P):P=e[62];let z;e[63]!==_||e[64]!==C||e[65]!==P?(z=t.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-white/10 bg-white/50 dark:bg-slate-900/50 p-6 shadow-xl backdrop-blur-xl",children:[_,C,P]}),e[63]=_,e[64]=C,e[65]=P,e[66]=z):z=e[66];let K;e[67]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx("div",{className:"mb-2 origin-left text-purple-600 dark:text-purple-400 transition-transform group-hover:scale-110",children:t.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),e[67]=K):K=e[67];let B;e[68]!==s?(B=s("Practice Mode"),e[68]=s,e[69]=B):B=e[69];let E;e[70]!==B?(E=t.jsxs("button",{className:"group rounded-xl border border-slate-200 dark:border-white/5 bg-white/50 dark:bg-slate-900/50 p-4 text-left transition-colors hover:border-purple-400/50 dark:hover:border-white/20",children:[K,t.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-white",children:B})]}),e[70]=B,e[71]=E):E=e[71];let X;e[72]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx("div",{className:"mb-2 origin-left text-blue-600 dark:text-blue-400 transition-transform group-hover:scale-110",children:t.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e[72]=X):X=e[72];let F;e[73]!==s?(F=s("Leaderboard"),e[73]=s,e[74]=F):F=e[74];let H;e[75]!==F?(H=t.jsxs(fe,{href:"/leaderboard",className:"group rounded-xl border border-slate-200 dark:border-white/5 bg-white/50 dark:bg-slate-900/50 p-4 text-left transition-colors hover:border-blue-400/50 dark:hover:border-white/20",children:[X,t.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-white",children:F})]}),e[75]=F,e[76]=H):H=e[76];let R;e[77]!==E||e[78]!==H?(R=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E,H]}),e[77]=E,e[78]=H,e[79]=R):R=e[79];let V;e[80]!==p||e[81]!==z||e[82]!==R?(V=t.jsxs("div",{className:"space-y-8 text-center md:text-left",children:[p,z,R]}),e[80]=p,e[81]=z,e[82]=R,e[83]=V):V=e[83];let Z;e[84]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx("span",{className:"mr-2 h-2 w-2 animate-pulse rounded-full bg-green-500"}),e[84]=Z):Z=e[84];let W;e[85]!==s?(W=s("Active Players"),e[85]=s,e[86]=W):W=e[86];let $;e[87]!==a.length||e[88]!==W?($=t.jsxs("h2",{className:"mb-4 flex items-center text-xl font-bold text-slate-800 dark:text-white",children:[Z,W," (",a.length,")"]}),e[87]=a.length,e[88]=W,e[89]=$):$=e[89];let I;if(e[90]!==a||e[91]!==s||e[92]!==l.id){let i;e[94]!==s||e[95]!==l.id?(i=o=>t.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 dark:border-white/5 bg-white/40 dark:bg-white/5 p-3 transition-colors hover:bg-white/60 dark:hover:bg-white/10",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-tr from-blue-500 to-teal-500 text-sm font-bold shadow-sm text-white",children:o.data.name.charAt(0)}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("p",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:[o.data.name," ",o.data.id==l.id&&t.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["(",s("You"),")"]})]}),t.jsx("p",{className:"text-xs text-slate-500",children:s("Online")})]})]},o.clientId),e[94]=s,e[95]=l.id,e[96]=i):i=e[96],I=a.map(i),e[90]=a,e[91]=s,e[92]=l.id,e[93]=I}else I=e[93];let T;e[97]!==a.length||e[98]!==s?(T=a.length===0&&t.jsx("div",{className:"py-10 text-center text-slate-500",children:s("Connecting...")}),e[97]=a.length,e[98]=s,e[99]=T):T=e[99];let U;e[100]!==I||e[101]!==T?(U=t.jsxs("div",{className:"custom-scrollbar max-h-[500px] space-y-2 overflow-y-auto pr-2",children:[I,T]}),e[100]=I,e[101]=T,e[102]=U):U=e[102];let q;e[103]!==$||e[104]!==U?(q=t.jsxs("div",{className:"h-full min-h-[400px] rounded-2xl border border-slate-200 dark:border-white/5 bg-white/30 dark:bg-slate-900/30 p-6 backdrop-blur-md",children:[$,U]}),e[103]=$,e[104]=U,e[105]=q):q=e[105];let ee;return e[106]!==V||e[107]!==q?(ee=t.jsxs("div",{className:"relative flex min-h-screen flex-col items-center overflow-hidden bg-slate-50 dark:bg-slate-950 p-0 text-slate-900 dark:text-white transition-colors duration-300",children:[D,G,J,t.jsxs("div",{className:"z-10 mt-8 grid w-full max-w-4xl grid-cols-1 items-start gap-8 p-6 md:grid-cols-2",children:[V,q]})]}),e[106]=V,e[107]=q,e[108]=ee):ee=e[108],ee}function Ne(e){const{match_id:s}=e.data;be.visit(`/arena/${s}`)}function ye(e){return[e.clientId,e]}export{Pe as default};
